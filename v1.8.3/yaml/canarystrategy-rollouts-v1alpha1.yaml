type: object
properties:
  canaryService:
    type:
      - string
      - "null"
    title: |-
      CanaryService holds the name of a service which selects pods with canary version and don't select any pods with stable version.
      +optional
  stableService:
    type:
      - string
      - "null"
    title: |-
      StableService holds the name of a service which selects pods with stable version and don't select any pods with canary version.
      +optional
  steps:
    type:
      - array
      - "null"
    items:
      type:
        - object
        - "null"
      properties:
        setWeight:
          type:
            - integer
            - "null"
          format: int32
          title: SetWeight sets what percentage of the newRS should receive
        pause:
          type:
            - object
            - "null"
          properties:
            duration:
              type:
                - string
                - integer
                - "null"
              description: |-
                Pause the rollout for the specified duration.
              examples:
                - 30s
                - 5m
                - 1h
              title: |-
                IntOrString is a type that can hold an int32 or a string.  When used in
                JSON or YAML marshalling and unmarshalling, it produces or consumes the
                inner type.  This allows you to have, for example, a JSON field that can
                accept a name or number.
                TODO: Rename to Int32OrString
          title: RolloutPause defines a pause stage for a rollout
        experiment:
          type:
            - object
            - "null"
          properties:
            templates:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  name:
                    type:
                      - string
                      - "null"
                    title: Name description of template that passed to the template
                  specRef:
                    type:
                      - string
                      - "null"
                    title: SpecRef indicates where the rollout should get the RS template from
                  replicas:
                    type:
                      - integer
                      - "null"
                    format: int32
                    title: |-
                      Replicas replica count for the template
                      +optional
                  metadata:
                    type:
                      - object
                      - "null"
                    properties:
                      labels:
                        type:
                          - object
                          - "null"
                        additionalProperties:
                          type:
                            - string
                            - "null"
                        title: |-
                          Labels Additional labels to add to the experiment
                          +optional
                      annotations:
                        type:
                          - object
                          - "null"
                        additionalProperties:
                          type:
                            - string
                            - "null"
                        title: |-
                          Annotations additional annotations to add to the experiment
                          +optional
                    title: PodTemplateMetadata extra labels to add to the template
                  selector:
                    type:
                      - object
                      - "null"
                    properties:
                      matchLabels:
                        type:
                          - object
                          - "null"
                        additionalProperties:
                          type:
                            - string
                            - "null"
                        title: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                          +optional
                      matchExpressions:
                        type:
                          - array
                          - "null"
                        items:
                          type:
                            - object
                            - "null"
                          properties:
                            key:
                              type:
                                - string
                                - "null"
                              description: key is the label key that the selector applies to.
                            operator:
                              type:
                                - string
                                - "null"
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                            values:
                              type:
                                - array
                                - "null"
                              items:
                                type:
                                  - string
                                  - "null"
                              title: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                                +optional
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                        title: |-
                          matchExpressions is a list of label selector requirements. The requirements are ANDed.
                          +optional
                    title: |-
                      A label selector is a label query over a set of resources. The result of matchLabels and
                      matchExpressions are ANDed. An empty label selector matches all objects. A null
                      label selector matches no objects.
                      +structType=atomic
                  weight:
                    type:
                      - integer
                      - "null"
                    format: int32
                    title: Weight sets the percentage of traffic the template's replicas should receive
                  service:
                    type:
                      - object
                      - "null"
                    properties:
                      name:
                        type:
                          - string
                          - "null"
                        title: Name of the service generated by the experiment
                title: RolloutExperimentTemplate defines the template used to create experiments for the Rollout's experiment canary step
              title: |-
                Templates what templates that should be added to the experiment. Should be non-nil
                +patchMergeKey=name
                +patchStrategy=merge
            duration:
              type:
                - string
                - "null"
              title: |-
                Duration is a duration string (e.g. 30s, 5m, 1h) that the experiment should run for
                +optional
            analyses:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  name:
                    type:
                      - string
                      - "null"
                    title: Name is a name for this analysis template invocation
                  templateName:
                    type:
                      - string
                      - "null"
                    title: TemplateName reference of the AnalysisTemplate name used by the Experiment to create the run
                  clusterScope:
                    type:
                      - boolean
                      - "null"
                    title: |-
                      Whether to look for the templateName at cluster scope or namespace scope
                      +optional
                  args:
                    type:
                      - array
                      - "null"
                    items:
                      type:
                        - object
                        - "null"
                      properties:
                        name:
                          type:
                            - string
                            - "null"
                          title: Name argument name
                        value:
                          type:
                            - string
                            - "null"
                          title: Value a hardcoded value for the argument. This field is a one of field with valueFrom
                        valueFrom:
                          type:
                            - object
                            - "null"
                          properties:
                            podTemplateHashValue:
                              type:
                                - string
                                - "null"
                              title: PodTemplateHashValue gets the value from one of the children ReplicaSet's Pod Template Hash
                            fieldRef:
                              type:
                                - object
                                - "null"
                              properties:
                                fieldPath:
                                  type:
                                    - string
                                    - "null"
                                  title: 'Required: Path of the field to select in the specified API version'
                          title: ArgumentValueFrom defines references to fields within resources to grab for the value (i.e. Pod Template Hash)
                      title: AnalysisRunArgument argument to add to analysisRun
                    title: |-
                      Args the arguments that will be added to the AnalysisRuns
                      +patchMergeKey=name
                      +patchStrategy=merge
                  requiredForCompletion:
                    type:
                      - boolean
                      - "null"
                    title: RequiredForCompletion blocks the Experiment from completing until the analysis has completed
              title: |-
                Analyses reference which analysis templates to run with the experiment
                +patchMergeKey=name
                +patchStrategy=merge
            dryRun:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  metricName:
                    type:
                      - string
                      - "null"
                    description: |-
                      Name of the metric which needs to be evaluated in the Dry-Run mode. Wildcard '*' is supported and denotes all
                      the available metrics.
                description: DryRun defines the settings for running the analysis in Dry-Run mode.
              title: |-
                DryRun object contains the settings for running the analysis in Dry-Run mode
                +patchMergeKey=metricName
                +patchStrategy=merge
                +optional
            analysisRunMetadata:
              type:
                - object
                - "null"
              properties:
                labels:
                  type:
                    - object
                    - "null"
                  additionalProperties:
                    type:
                      - string
                      - "null"
                  title: |-
                    Labels Additional labels to add to the AnalysisRun
                    +optional
                annotations:
                  type:
                    - object
                    - "null"
                  additionalProperties:
                    type:
                      - string
                      - "null"
                  title: |-
                    Annotations additional annotations to add to the AnalysisRun
                    +optional
              title: AnalysisRunMetadata extra labels to add to the AnalysisRun
          title: RolloutExperimentStep defines a template that is used to create a experiment for a step
        analysis:
          type:
            - object
            - "null"
          properties:
            templates:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  templateName:
                    type:
                      - string
                      - "null"
                    title: |-
                      TemplateName name of template to use in AnalysisRun
                      +optional
                  clusterScope:
                    type:
                      - boolean
                      - "null"
                    title: |-
                      Whether to look for the templateName at cluster scope or namespace scope
                      +optional
              title: |-
                Templates reference to a list of analysis templates to combine for an AnalysisRun
                +patchMergeKey=templateName
                +patchStrategy=merge
            args:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  name:
                    type:
                      - string
                      - "null"
                    title: Name argument name
                  value:
                    type:
                      - string
                      - "null"
                    title: Value a hardcoded value for the argument. This field is a one of field with valueFrom
                  valueFrom:
                    type:
                      - object
                      - "null"
                    properties:
                      podTemplateHashValue:
                        type:
                          - string
                          - "null"
                        title: PodTemplateHashValue gets the value from one of the children ReplicaSet's Pod Template Hash
                      fieldRef:
                        type:
                          - object
                          - "null"
                        properties:
                          fieldPath:
                            type:
                              - string
                              - "null"
                            title: 'Required: Path of the field to select in the specified API version'
                    title: ArgumentValueFrom defines references to fields within resources to grab for the value (i.e. Pod Template Hash)
                title: AnalysisRunArgument argument to add to analysisRun
              title: |-
                Args the arguments that will be added to the AnalysisRuns
                +patchMergeKey=name
                +patchStrategy=merge
            dryRun:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  metricName:
                    type:
                      - string
                      - "null"
                    description: |-
                      Name of the metric which needs to be evaluated in the Dry-Run mode. Wildcard '*' is supported and denotes all
                      the available metrics.
                description: DryRun defines the settings for running the analysis in Dry-Run mode.
              title: |-
                DryRun object contains the settings for running the analysis in Dry-Run mode
                +patchMergeKey=metricName
                +patchStrategy=merge
                +optional
            measurementRetention:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  metricName:
                    type:
                      - string
                      - "null"
                    description: MetricName is the name of the metric on which this retention policy should be applied.
                  limit:
                    type:
                      - integer
                      - "null"
                    format: int32
                    description: Limit is the maximum number of measurements to be retained for this given metric.
                description: MeasurementRetention defines the settings for retaining the number of measurements during the analysis.
              title: |-
                MeasurementRetention object contains the settings for retaining the number of measurements during the analysis
                +patchMergeKey=metricName
                +patchStrategy=merge
                +optional
            analysisRunMetadata:
              type:
                - object
                - "null"
              properties:
                labels:
                  type:
                    - object
                    - "null"
                  additionalProperties:
                    type:
                      - string
                      - "null"
                  title: |-
                    Labels Additional labels to add to the AnalysisRun
                    +optional
                annotations:
                  type:
                    - object
                    - "null"
                  additionalProperties:
                    type:
                      - string
                      - "null"
                  title: |-
                    Annotations additional annotations to add to the AnalysisRun
                    +optional
              title: AnalysisRunMetadata extra labels to add to the AnalysisRun
          title: RolloutAnalysis defines a template that is used to create a analysisRun
        setCanaryScale:
          type:
            - object
            - "null"
          properties:
            weight:
              type:
                - integer
                - "null"
              format: int32
              title: |-
                Weight sets the percentage of replicas the newRS should have
                +optional
            replicas:
              type:
                - integer
                - "null"
              format: int32
              title: |-
                Replicas sets the number of replicas the newRS should have
                +optional
            matchTrafficWeight:
              type:
                - boolean
                - "null"
              title: |-
                MatchTrafficWeight cancels out previously set Replicas or Weight, effectively activating SetWeight
                +optional
          title: SetCanaryScale defines how to scale the newRS without changing traffic weight
        setHeaderRoute:
          type:
            - object
            - "null"
          properties:
            name:
              type:
                - string
                - "null"
              title: |-
                Name this is the name of the route to use for the mirroring of traffic this also needs
                to be included in the `spec.strategy.canary.trafficRouting.managedRoutes` field
            match:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  headerName:
                    type:
                      - string
                      - "null"
                    title: HeaderName the name of the request header
                  headerValue:
                    type:
                      - object
                      - "null"
                    properties:
                      exact:
                        type:
                          - string
                          - "null"
                        title: Exact The string must match exactly
                      prefix:
                        type:
                          - string
                          - "null"
                        title: Prefix The string will be prefixed matched
                      regex:
                        type:
                          - string
                          - "null"
                        title: Regex The string will be regular expression matched
                    title: StringMatch Used to define what type of matching we will use exact, prefix, or regular expression
          title: SetHeaderRoute defines the route with specified header name to send 100% of traffic to the canary service
        setMirrorRoute:
          type:
            - object
            - "null"
          properties:
            name:
              type:
                - string
                - "null"
              title: |-
                Name this is the name of the route to use for the mirroring of traffic this also needs
                to be included in the `spec.strategy.canary.trafficRouting.managedRoutes` field
            match:
              type:
                - array
                - "null"
              items:
                type:
                  - object
                  - "null"
                properties:
                  method:
                    type:
                      - object
                      - "null"
                    properties:
                      exact:
                        type:
                          - string
                          - "null"
                        title: Exact The string must match exactly
                      prefix:
                        type:
                          - string
                          - "null"
                        title: Prefix The string will be prefixed matched
                      regex:
                        type:
                          - string
                          - "null"
                        title: Regex The string will be regular expression matched
                    title: StringMatch Used to define what type of matching we will use exact, prefix, or regular expression
                  path:
                    type:
                      - object
                      - "null"
                    properties:
                      exact:
                        type:
                          - string
                          - "null"
                        title: Exact The string must match exactly
                      prefix:
                        type:
                          - string
                          - "null"
                        title: Prefix The string will be prefixed matched
                      regex:
                        type:
                          - string
                          - "null"
                        title: Regex The string will be regular expression matched
                    title: StringMatch Used to define what type of matching we will use exact, prefix, or regular expression
                  headers:
                    type:
                      - object
                      - "null"
                    additionalProperties:
                      type:
                        - object
                        - "null"
                      properties:
                        exact:
                          type:
                            - string
                            - "null"
                          title: Exact The string must match exactly
                        prefix:
                          type:
                            - string
                            - "null"
                          title: Prefix The string will be prefixed matched
                        regex:
                          type:
                            - string
                            - "null"
                          title: Regex The string will be regular expression matched
                      title: StringMatch Used to define what type of matching we will use exact, prefix, or regular expression
                    title: |-
                      Headers What request with matching headers should be mirrored
                      +optional
              title: |-
                Match Contains a list of rules that if mated will mirror the traffic to the services
                +optional
            percentage:
              type:
                - integer
                - "null"
              format: int32
              title: |-
                Services The list of services to mirror the traffic to if the method, path, headers match
                Service string `json:"service" protobuf:"bytes,3,opt,name=service"`
                Percentage What percent of the traffic that matched the rules should be mirrored
        plugin:
          type:
            - object
            - "null"
          properties:
            name:
              type:
                - string
                - "null"
              title: Name of the hashicorp go-plugin step to query
            config:
              type:
                - string
                - "null"
              format: byte
              title: |-
                +kubebuilder:validation:Schemaless
                +kubebuilder:pruning:PreserveUnknownFields
                +kubebuilder:validation:Type=object
                Config is the configuration object for the specified plugin
      description: CanaryStep defines a step of a canary deployment.
    title: |-
      Steps define the order of phases to execute the canary deployment
      +optional
  trafficRouting:
    type:
      - object
      - "null"
    properties:
      istio:
        type:
          - object
          - "null"
        properties:
          virtualService:
            type:
              - object
              - "null"
            properties:
              name:
                type:
                  - string
                  - "null"
                title: Name holds the name of the VirtualService
              routes:
                type:
                  - array
                  - "null"
                items:
                  type:
                    - string
                    - "null"
                description: A list of HTTP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
              tlsRoutes:
                type:
                  - array
                  - "null"
                items:
                  type:
                    - object
                    - "null"
                  properties:
                    port:
                      type:
                        - string
                        - "null"
                      format: int64
                      description: Port number of the TLS Route desired to be matched in the given Istio VirtualService.
                    sniHosts:
                      type:
                        - array
                        - "null"
                      items:
                        type:
                          - string
                          - "null"
                      description: A list of all the SNI Hosts of the TLS Route desired to be matched in the given Istio VirtualService.
                  description: TLSRoute holds the information on the virtual service's TLS/HTTPS routes that are desired to be matched for changing weights.
                description: A list of TLS/HTTPS routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
              tcpRoutes:
                type:
                  - array
                  - "null"
                items:
                  type:
                    - object
                    - "null"
                  properties:
                    port:
                      type:
                        - string
                        - "null"
                      format: int64
                      description: Port number of the TCP Route desired to be matched in the given Istio VirtualService.
                  description: TCPRoute holds the information on the virtual service's TCP routes that are desired to be matched for changing weights.
                description: A list of TCP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
            title: IstioVirtualService holds information on the virtual service the rollout needs to modify
          destinationRule:
            type:
              - object
              - "null"
            properties:
              name:
                type:
                  - string
                  - "null"
                title: Name holds the name of the DestinationRule
              canarySubsetName:
                type:
                  - string
                  - "null"
                title: CanarySubsetName is the subset name to modify labels with canary ReplicaSet pod template hash value
              stableSubsetName:
                type:
                  - string
                  - "null"
                title: StableSubsetName is the subset name to modify labels with stable ReplicaSet pod template hash value
            title: IstioDestinationRule is a reference to an Istio DestinationRule to modify and shape traffic
          virtualServices:
            type:
              - array
              - "null"
            items:
              type:
                - object
                - "null"
              properties:
                name:
                  type:
                    - string
                    - "null"
                  title: Name holds the name of the VirtualService
                routes:
                  type:
                    - array
                    - "null"
                  items:
                    type:
                      - string
                      - "null"
                  description: A list of HTTP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
                tlsRoutes:
                  type:
                    - array
                    - "null"
                  items:
                    type:
                      - object
                      - "null"
                    properties:
                      port:
                        type:
                          - string
                          - "null"
                        format: int64
                        description: Port number of the TLS Route desired to be matched in the given Istio VirtualService.
                      sniHosts:
                        type:
                          - array
                          - "null"
                        items:
                          type:
                            - string
                            - "null"
                        description: A list of all the SNI Hosts of the TLS Route desired to be matched in the given Istio VirtualService.
                    description: TLSRoute holds the information on the virtual service's TLS/HTTPS routes that are desired to be matched for changing weights.
                  description: A list of TLS/HTTPS routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
                tcpRoutes:
                  type:
                    - array
                    - "null"
                  items:
                    type:
                      - object
                      - "null"
                    properties:
                      port:
                        type:
                          - string
                          - "null"
                        format: int64
                        description: Port number of the TCP Route desired to be matched in the given Istio VirtualService.
                    description: TCPRoute holds the information on the virtual service's TCP routes that are desired to be matched for changing weights.
                  description: A list of TCP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
              title: IstioVirtualService holds information on the virtual service the rollout needs to modify
            title: VirtualServices references a list of Istio VirtualService to modify to shape traffic
        title: IstioTrafficRouting configuration for Istio service mesh to enable fine grain configuration
      nginx:
        type:
          - object
          - "null"
        properties:
          annotationPrefix:
            type:
              - string
              - "null"
            title: |-
              AnnotationPrefix has to match the configured annotation prefix on the nginx ingress controller
              +optional
          stableIngress:
            type:
              - string
              - "null"
            title: StableIngress refers to the name of an `Ingress` resource in the same namespace as the `Rollout`
          additionalIngressAnnotations:
            type:
              - object
              - "null"
            additionalProperties:
              type:
                - string
                - "null"
            title: +optional
          stableIngresses:
            type:
              - array
              - "null"
            items:
              type:
                - string
                - "null"
            title: |-
              StableIngresses refers to the names of `Ingress` resources in the same namespace as the `Rollout` in a multi ingress scenario
              +optional
          canaryIngressAnnotations:
            type:
              - object
              - "null"
            additionalProperties:
              type:
                - string
                - "null"
            title: +optional
        title: NginxTrafficRouting configuration for Nginx ingress controller to control traffic routing
      alb:
        type:
          - object
          - "null"
        properties:
          ingress:
            type:
              - string
              - "null"
            title: Ingress refers to the name of an `Ingress` resource in the same namespace as the `Rollout`
          servicePort:
            type:
              - integer
              - "null"
            format: int32
            title: ServicePort refers to the port that the Ingress action should route traffic to
          rootService:
            type:
              - string
              - "null"
            title: RootService references the service in the ingress to the controller should add the action to
          annotationPrefix:
            type:
              - string
              - "null"
            title: |-
              AnnotationPrefix has to match the configured annotation prefix on the alb ingress controller
              +optional
          stickinessConfig:
            type:
              - object
              - "null"
            properties:
              enabled:
                type:
                  - boolean
                  - "null"
              durationSeconds:
                type:
                  - string
                  - "null"
                format: int64
          ingresses:
            type:
              - array
              - "null"
            items:
              type:
                - string
                - "null"
            title: |-
              Ingresses refers to the name of an `Ingress` resource in the same namespace as the `Rollout` in a multi ingress scenario
              +optional
        title: ALBTrafficRouting configuration for ALB ingress controller to control traffic routing
      smi:
        type:
          - object
          - "null"
        properties:
          rootService:
            type:
              - string
              - "null"
            title: |-
              RootService holds the name of that clients use to communicate.
              +optional
          trafficSplitName:
            type:
              - string
              - "null"
            title: |-
              TrafficSplitName holds the name of the TrafficSplit.
              +optional
        title: SMITrafficRouting configuration for TrafficSplit Custom Resource to control traffic routing
      ambassador:
        type:
          - object
          - "null"
        properties:
          mappings:
            type:
              - array
              - "null"
            items:
              type:
                - string
                - "null"
            title: |-
              Mappings refer to the name of the Ambassador Mappings used to route traffic to the
              service
        title: |-
          AmbassadorTrafficRouting defines the configuration required to use Ambassador as traffic
          router
      appMesh:
        type:
          - object
          - "null"
        properties:
          virtualService:
            type:
              - object
              - "null"
            properties:
              name:
                type:
                  - string
                  - "null"
                title: Name is the name of virtual service
              routes:
                type:
                  - array
                  - "null"
                items:
                  type:
                    - string
                    - "null"
                description: Routes is list of HTTP routes within virtual router associated with virtual service to edit. If omitted, virtual service must have a single route of this type.
            title: AppMeshVirtualService holds information on the virtual service the rollout needs to modify
          virtualNodeGroup:
            type:
              - object
              - "null"
            properties:
              canaryVirtualNodeRef:
                type:
                  - object
                  - "null"
                properties:
                  name:
                    type:
                      - string
                      - "null"
                    title: Name is the name of VirtualNode CR
                title: AppMeshVirtualNodeReference holds a reference to VirtualNode.appmesh.k8s.aws
              stableVirtualNodeRef:
                type:
                  - object
                  - "null"
                properties:
                  name:
                    type:
                      - string
                      - "null"
                    title: Name is the name of VirtualNode CR
                title: AppMeshVirtualNodeReference holds a reference to VirtualNode.appmesh.k8s.aws
            title: AppMeshVirtualNodeGroup holds information about targets used for routing traffic to a virtual service
        title: AppMeshTrafficRouting configuration for AWS AppMesh service mesh to enable fine grain configuration
      traefik:
        type:
          - object
          - "null"
        properties:
          weightedTraefikServiceName:
            type:
              - string
              - "null"
            title: TraefikServiceName refer to the name of the Traefik service used to route traffic to the service
        title: TraefikTrafficRouting defines the configuration required to use Traefik as traffic router
      managedRoutes:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            name:
              type:
                - string
                - "null"
        description: |-
          ManagedRoutes A list of HTTP routes that Argo Rollouts manages, the order of this array also becomes the precedence in the upstream
          traffic router.
      apisix:
        type:
          - object
          - "null"
        properties:
          route:
            type:
              - object
              - "null"
            properties:
              name:
                type:
                  - string
                  - "null"
                title: Name refer to the name of the APISIX Route used to route traffic to the service
              rules:
                type:
                  - array
                  - "null"
                items:
                  type:
                    - string
                    - "null"
                title: RuleRef a list of the APISIX Route HTTP Rules used to route traffic to the service
            title: ApisixRoute holds information on the APISIX Route the rollout needs to modify
        title: ApisixTrafficRouting defines the configuration required to use APISIX as traffic router
      plugins:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
          format: byte
        title: |-
          +kubebuilder:validation:Schemaless
          +kubebuilder:pruning:PreserveUnknownFields
          +kubebuilder:validation:Type=object
          Plugins holds specific configuration that traffic router plugins can use for routing traffic
      maxTrafficWeight:
        type:
          - integer
          - "null"
        format: int32
        title: MaxTrafficWeight The total weight of traffic. If unspecified, it defaults to 100
    title: RolloutTrafficRouting hosts all the different configuration for supported service meshes to enable more fine-grained traffic routing
  maxUnavailable:
    type:
      - object
      - "null"
    properties:
      type:
        type:
          - string
          - "null"
        format: int64
      intVal:
        type:
          - integer
          - "null"
        format: int32
      strVal:
        type:
          - string
          - "null"
    description: |-
      +protobuf=true
      +protobuf.options.(gogoproto.goproto_stringer)=false
      +k8s:openapi-gen=true
    title: |-
      IntOrString is a type that can hold an int32 or a string.  When used in
      JSON or YAML marshalling and unmarshalling, it produces or consumes the
      inner type.  This allows you to have, for example, a JSON field that can
      accept a name or number.
      TODO: Rename to Int32OrString
  maxSurge:
    type:
      - object
      - "null"
    properties:
      type:
        type:
          - string
          - "null"
        format: int64
      intVal:
        type:
          - integer
          - "null"
        format: int32
      strVal:
        type:
          - string
          - "null"
    description: |-
      +protobuf=true
      +protobuf.options.(gogoproto.goproto_stringer)=false
      +k8s:openapi-gen=true
    title: |-
      IntOrString is a type that can hold an int32 or a string.  When used in
      JSON or YAML marshalling and unmarshalling, it produces or consumes the
      inner type.  This allows you to have, for example, a JSON field that can
      accept a name or number.
      TODO: Rename to Int32OrString
  analysis:
    type:
      - object
      - "null"
    properties:
      rolloutAnalysis:
        type:
          - object
          - "null"
        properties:
          templates:
            type:
              - array
              - "null"
            items:
              type:
                - object
                - "null"
              properties:
                templateName:
                  type:
                    - string
                    - "null"
                  title: |-
                    TemplateName name of template to use in AnalysisRun
                    +optional
                clusterScope:
                  type:
                    - boolean
                    - "null"
                  title: |-
                    Whether to look for the templateName at cluster scope or namespace scope
                    +optional
            title: |-
              Templates reference to a list of analysis templates to combine for an AnalysisRun
              +patchMergeKey=templateName
              +patchStrategy=merge
          args:
            type:
              - array
              - "null"
            items:
              type:
                - object
                - "null"
              properties:
                name:
                  type:
                    - string
                    - "null"
                  title: Name argument name
                value:
                  type:
                    - string
                    - "null"
                  title: Value a hardcoded value for the argument. This field is a one of field with valueFrom
                valueFrom:
                  type:
                    - object
                    - "null"
                  properties:
                    podTemplateHashValue:
                      type:
                        - string
                        - "null"
                      title: PodTemplateHashValue gets the value from one of the children ReplicaSet's Pod Template Hash
                    fieldRef:
                      type:
                        - object
                        - "null"
                      properties:
                        fieldPath:
                          type:
                            - string
                            - "null"
                          title: 'Required: Path of the field to select in the specified API version'
                  title: ArgumentValueFrom defines references to fields within resources to grab for the value (i.e. Pod Template Hash)
              title: AnalysisRunArgument argument to add to analysisRun
            title: |-
              Args the arguments that will be added to the AnalysisRuns
              +patchMergeKey=name
              +patchStrategy=merge
          dryRun:
            type:
              - array
              - "null"
            items:
              type:
                - object
                - "null"
              properties:
                metricName:
                  type:
                    - string
                    - "null"
                  description: |-
                    Name of the metric which needs to be evaluated in the Dry-Run mode. Wildcard '*' is supported and denotes all
                    the available metrics.
              description: DryRun defines the settings for running the analysis in Dry-Run mode.
            title: |-
              DryRun object contains the settings for running the analysis in Dry-Run mode
              +patchMergeKey=metricName
              +patchStrategy=merge
              +optional
          measurementRetention:
            type:
              - array
              - "null"
            items:
              type:
                - object
                - "null"
              properties:
                metricName:
                  type:
                    - string
                    - "null"
                  description: MetricName is the name of the metric on which this retention policy should be applied.
                limit:
                  type:
                    - integer
                    - "null"
                  format: int32
                  description: Limit is the maximum number of measurements to be retained for this given metric.
              description: MeasurementRetention defines the settings for retaining the number of measurements during the analysis.
            title: |-
              MeasurementRetention object contains the settings for retaining the number of measurements during the analysis
              +patchMergeKey=metricName
              +patchStrategy=merge
              +optional
          analysisRunMetadata:
            type:
              - object
              - "null"
            properties:
              labels:
                type:
                  - object
                  - "null"
                additionalProperties:
                  type:
                    - string
                    - "null"
                title: |-
                  Labels Additional labels to add to the AnalysisRun
                  +optional
              annotations:
                type:
                  - object
                  - "null"
                additionalProperties:
                  type:
                    - string
                    - "null"
                title: |-
                  Annotations additional annotations to add to the AnalysisRun
                  +optional
            title: AnalysisRunMetadata extra labels to add to the AnalysisRun
        title: RolloutAnalysis defines a template that is used to create a analysisRun
      startingStep:
        type:
          - integer
          - "null"
        format: int32
        title: |-
          StartingStep indicates which step the background analysis should start on
          If not listed, controller defaults to 0
    title: RolloutAnalysisBackground defines a template that is used to create a background analysisRun
  antiAffinity:
    type:
      - object
      - "null"
    properties:
      preferredDuringSchedulingIgnoredDuringExecution:
        type:
          - object
          - "null"
        properties:
          weight:
            type:
              - integer
              - "null"
            format: int32
            description: Weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
        title: PreferredDuringSchedulingIgnoredDuringExecution defines the weight of the anti-affinity injection
      requiredDuringSchedulingIgnoredDuringExecution:
        type:
          - object
          - "null"
        title: RequiredDuringSchedulingIgnoredDuringExecution defines inter-pod scheduling rule to be RequiredDuringSchedulingIgnoredDuringExecution
    title: AntiAffinity defines which inter-pod scheduling rule to use for anti-affinity injection
  canaryMetadata:
    type:
      - object
      - "null"
    properties:
      labels:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Labels Additional labels to add to the experiment
          +optional
      annotations:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Annotations additional annotations to add to the experiment
          +optional
    title: PodTemplateMetadata extra labels to add to the template
  stableMetadata:
    type:
      - object
      - "null"
    properties:
      labels:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Labels Additional labels to add to the experiment
          +optional
      annotations:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Annotations additional annotations to add to the experiment
          +optional
    title: PodTemplateMetadata extra labels to add to the template
  scaleDownDelaySeconds:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      ScaleDownDelaySeconds adds a delay before scaling down the previous ReplicaSet when the
      canary strategy is used with traffic routing (default 30 seconds). A delay in scaling down
      the previous ReplicaSet is needed after switching the stable service selector to point to
      the new ReplicaSet, in order to give time for traffic providers to re-target the new pods.
      This value is ignored with basic, replica-weighted canary without traffic routing.
      +optional
  scaleDownDelayRevisionLimit:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      ScaleDownDelayRevisionLimit limits the number of old RS that can run at one time before getting scaled down
      +optional
  abortScaleDownDelaySeconds:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      AbortScaleDownDelaySeconds adds a delay in second before scaling down the canary pods when update
      is aborted for canary strategy with traffic routing (not applicable for basic canary).
      0 means canary pods are not scaled down.
      Default is 30 seconds.
      +optional
  dynamicStableScale:
    type:
      - boolean
      - "null"
    description: |-
      DynamicStableScale is a traffic routing feature which dynamically scales the stable
      ReplicaSet to minimize total pods which are running during an update. This is calculated by
      scaling down the stable as traffic is increased to canary. When disabled (the default behavior)
      the stable ReplicaSet remains fully scaled to support instantaneous aborts.
  pingPong:
    type:
      - object
      - "null"
    properties:
      pingService:
        type:
          - string
          - "null"
        title: name of the ping service
      pongService:
        type:
          - string
          - "null"
        title: name of the pong service
    description: PingPongSpec holds the ping and pong service name.
  minPodsPerReplicaSet:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      Assuming the desired number of pods in a stable or canary ReplicaSet is not zero, then make sure it is at least
      MinPodsPerReplicaSet for High Availability. Only applicable for TrafficRoutedCanary
title: CanaryStrategy defines parameters for a Replica Based Canary
$schema: http://json-schema.org/schema#
